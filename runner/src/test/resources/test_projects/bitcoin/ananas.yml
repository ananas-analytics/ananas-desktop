dag:
  connections:
    - source: 5d409da52c03930c36c3fdb9
      target: 5d4557439c7a5441fdc67d3b
    - source: 5d4557439c7a5441fdc67d3b
      target: 5d4559249c7a5441fdc67d47
    - source: 5d409da52c03930c36c3fdb9
      target: 5edebf981c62cbb8534a1371
    - source: 5edebf981c62cbb8534a1371
      target: 5edebf6f1c62cbb8534a136e
id: 5d31c70384b5674b6a220288
name: bitcoin
steps:
  5d409da52c03930c36c3fdb9:
    config:
      body: ""
      dataSourceLoop:
        - begin: 1
          end: 2
          name: n
          step: 1
          type: number
        - begin: 1
          end: 3
          name: m
          step: 1
          type: number
        - begin: 1
          end: 5
          name: k
          step: 1
          type: number
      forceAutoDetectSchema: true
      format: json
      headers: {}
      jsonpath: $
      lineDelimiter: \n
      method: get
      subtype: api
      url: https://api.coindesk.com/v1/bpi/currentprice.json?n=%{n}&m=%{m}&k=%{k}
    dataframe:
      data: []
      id: 5d409da52c03930c36c3fdb9
      schema:
        fields:
          - name: bpi.EUR.rate_float
            type: DECIMAL
          - name: bpi.USD.rate_float
            type: DECIMAL
          - name: bpi.GBP.rate
            type: VARCHAR
          - name: bpi.USD.code
            type: VARCHAR
          - name: bpi.GBP.symbol
            type: VARCHAR
          - name: bpi.EUR.code
            type: VARCHAR
          - name: time.updateduk
            type: VARCHAR
          - name: bpi.USD.rate
            type: VARCHAR
          - name: bpi.EUR.description
            type: VARCHAR
          - name: time.updated
            type: VARCHAR
          - name: time.updatedISO
            type: VARCHAR
          - name: chartName
            type: VARCHAR
          - name: bpi.GBP.rate_float
            type: DECIMAL
          - name: bpi.EUR.rate
            type: VARCHAR
          - name: bpi.GBP.description
            type: VARCHAR
          - name: bpi.USD.symbol
            type: VARCHAR
          - name: bpi.EUR.symbol
            type: VARCHAR
          - name: bpi.GBP.code
            type: VARCHAR
          - name: disclaimer
            type: VARCHAR
          - name: bpi.USD.description
            type: VARCHAR
          - name: n
            type: INTEGER
          - name: m
            type: INTEGER
          - name: k
            type: INTEGER
    description: Connect data from an API
    id: 5d409da52c03930c36c3fdb9
    metadataId: org.ananas.source.api
    name: BPI real-time data
    type: connector
  5d4557439c7a5441fdc67d3b:
    config:
      sql: |-
        SELECT
        	`bpi.EUR.code` as `code`,
          `bpi.EUR.rate_float` as `rate`,
          `time.updatedISO` as `time`
        FROM PCOLLECTION
      subtype: sql
    dataframe:
      data: []
      id: 5d4557439c7a5441fdc67d3b
      schema:
        fields:
          - name: code
            type: VARCHAR
          - name: rate
            type: DECIMAL
          - name: time
            type: VARCHAR
    description: Transform your data with SQL
    id: 5d4557439c7a5441fdc67d3b
    metadataId: org.ananas.transform.sql
    name: SQL
    type: transformer
  5d4559249c7a5441fdc67d47:
    config:
      color: "#417505"
      fields:
        - rate
      size: 52px
      sql: SELECT * FROM PCOLLECTION
      subtype: big number
      title: Euro Rate
    dataframe:
      data: []
      id: 5d4559249c7a5441fdc67d47
      schema:
        fields:
          - name: CODE
            type: VARCHAR
          - name: RATE
            type: DECIMAL
          - name: TIME
            type: VARCHAR
    description: Visualize a single number
    id: 5d4559249c7a5441fdc67d47
    metadataId: org.ananas.visualization.bignumber
    name: Big Number
    type: viewer
  5edebf6f1c62cbb8534a136e:
    config:
      format: csv
      header: true
      path: /Users/b.hou/
      prefix: output-
      subtype: file
    dataframe:
      data: []
      id: 5edebf6f1c62cbb8534a136e
      schema:
        fields:
          - name: bpi.EUR.rate_float
            type: DOUBLE
          - name: bpi.USD.rate_float
            type: DOUBLE
          - name: bpi.GBP.rate
            type: VARCHAR
          - name: bpi.USD.code
            type: VARCHAR
          - name: bpi.GBP.symbol
            type: VARCHAR
          - name: bpi.EUR.code
            type: VARCHAR
          - name: time.updateduk
            type: VARCHAR
          - name: bpi.USD.rate
            type: VARCHAR
          - name: bpi.EUR.description
            type: VARCHAR
          - name: time.updated
            type: VARCHAR
          - name: time.updatedISO
            type: TIMESTAMP
          - name: chartName
            type: VARCHAR
          - name: bpi.GBP.rate_float
            type: DOUBLE
          - name: bpi.EUR.rate
            type: VARCHAR
          - name: bpi.GBP.description
            type: VARCHAR
          - name: bpi.USD.symbol
            type: VARCHAR
          - name: bpi.EUR.symbol
            type: VARCHAR
          - name: bpi.GBP.code
            type: VARCHAR
          - name: disclaimer
            type: VARCHAR
          - name: bpi.USD.description
            type: VARCHAR
          - name: n
            type: INTEGER
          - name: m
            type: INTEGER
          - name: k
            type: INTEGER
    description: Save your data as CSV file
    id: 5edebf6f1c62cbb8534a136e
    metadataId: org.ananas.destination.file.csv
    name: CSV Destination
    type: loader
  5edebf981c62cbb8534a1371:
    config:
      sql: |-
        SELECT
        	*
        FROM PCOLLECTION
        WHERE n = 1
      subtype: sql
    dataframe:
      data: []
      id: 5edebf981c62cbb8534a1371
      schema:
        fields:
          - name: bpi.EUR.rate_float
            type: DECIMAL
          - name: bpi.USD.rate_float
            type: DECIMAL
          - name: bpi.GBP.rate
            type: VARCHAR
          - name: bpi.USD.code
            type: VARCHAR
          - name: bpi.GBP.symbol
            type: VARCHAR
          - name: bpi.EUR.code
            type: VARCHAR
          - name: time.updateduk
            type: VARCHAR
          - name: bpi.USD.rate
            type: VARCHAR
          - name: bpi.EUR.description
            type: VARCHAR
          - name: time.updated
            type: VARCHAR
          - name: time.updatedISO
            type: VARCHAR
          - name: chartName
            type: VARCHAR
          - name: bpi.GBP.rate_float
            type: DECIMAL
          - name: bpi.EUR.rate
            type: VARCHAR
          - name: bpi.GBP.description
            type: VARCHAR
          - name: bpi.USD.symbol
            type: VARCHAR
          - name: bpi.EUR.symbol
            type: VARCHAR
          - name: bpi.GBP.code
            type: VARCHAR
          - name: disclaimer
            type: VARCHAR
          - name: bpi.USD.description
            type: VARCHAR
          - name: n
            type: INTEGER
          - name: m
            type: INTEGER
          - name: k
            type: INTEGER
    description: Transform your data with SQL
    id: 5edebf981c62cbb8534a1371
    metadataId: org.ananas.transform.sql
    name: SELECT ALL
    type: transformer
triggers: []
variables:
  - name: MYSQL_HOST
    description: ""
    scope: project
    type: string
  - name: MYSQL_PASSWORD
    description: ""
    scope: project
    type: string
  - name: MYSQL_DB
    description: ""
    scope: project
    type: string
  - name: SPARK_MASTER_HOST
    description: ""
    scope: project
    type: string
  - name: FLINK_MASTER_HOST
    description: ""
    scope: project
    type: string
